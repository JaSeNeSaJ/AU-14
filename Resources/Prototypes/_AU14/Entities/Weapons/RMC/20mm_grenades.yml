#SHELLS
- type: entity
  abstract: true
  parent: BaseItem
  id: AU14BaseAirBurstGrenadeRMC
  name: 20-mm air burst grenade
  components:
  - type: Appearance
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_frag
  - type: Item
    size: Small
  - type: Clothing
    slots:
    - suitStorage
  - type: Destructible
    thresholds: []
  - type: IgnorePredictionHide
  - type: Ammo

- type: entity
  abstract: true
  id: AU14L103A1Tags
  components:
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14GrenadeL103A1

- type: entity
  parent:
  - CMGrenadeBase
  - AU14L103A1Tags
  id: AU1420MMGrenadeL103A1
  name: L103A1 20mm HE grenade
  description: A 20mm grenade that explodes upon impact. Less powerful than full-sized grenades.
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_he
  - type: GenericVisualizer
    visuals:
      enum.Trigger.TriggerVisuals.VisualState:
        enum.ConstructionVisuals.Layer:
          Primed: { state: grenade_20mm_he_active }
          Unprimed: { state: grenade_20mm_he }
  - type: ExplodeOnTrigger
  - type: Explosive
    maxIntensity: 14
    intensitySlope: 4
    totalIntensity: 160
    canCreateVacuum: false
  - type: Ammo
  - type: CMExplosionEffect
  - type: CMVocalizeTrigger
  - type: RMCScorchEffect
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14GrenadeL103A1

- type: entity
  parent:
  - CMGrenadeBase
  - AU14L103A1Tags
  id: AU1420MMGrenadeL108A1
  name: L108A1 20mm HESH grenade
  description: High-Explosive Dual-Purpose. A small, but deceptively strong blast grenade that has been phasing out the M15 HE grenades alongside the 30mm HEFA. Capable of being loaded in grenade launchers, or thrown by hand.
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_squash
  - type: GenericVisualizer
    visuals:
      enum.Trigger.TriggerVisuals.VisualState:
        enum.ConstructionVisuals.Layer:
          Primed: { state: grenade_20mm_squash_active }
          Unprimed: { state: grenade_20mm_squash }
  - type: ExplodeOnTrigger
  - type: Explosive
    maxIntensity: 28
    intensitySlope: 8
    totalIntensity: 200
    canCreateVacuum: false
  - type: Ammo
  - type: CMExplosionEffect
  - type: CMVocalizeTrigger
  - type: RMCScorchEffect
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14GrenadeL103A1

- type: entity
  parent:
  - CMGrenadeBase
  - AU14L103A1Tags
  id: AU1420MMGrenadeL101A2
  name: L101A2 20mm nerve-agent grenade
  description: A 20mm grenade that explodes into a voluminous cloud of nerve gas upon impact.
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_gas
  - type: GenericVisualizer
    visuals:
      enum.Trigger.TriggerVisuals.VisualState:
        enum.ConstructionVisuals.Layer:
          Primed: { state: grenade_20mm_gas_active }
          Unprimed: { state: grenade_20mm_gas }
  - type: OnUseTimerTrigger
    delay: 2
  - type: SpawnOnTrigger
    proto: RMCSmokeNeurotoxin # Placeholder
  - type: SoundOnTrigger
    sound: /Audio/Effects/smoke.ogg
  - type: DeleteOnTrigger
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14GrenadeL103A1
  - type: Ammo

- type: entity
  parent: AU14BaseAirBurstGrenadeRMC
  id: AU1420MMGrenadeL104A1
  name: L104A1 20mm fragmentation grenade
  description: A 20mm grenade that explodes into shrapnel upon impact.
  components:
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14AirburstGrenadeRMC
    - AU14GrenadeL104A1
  - type: ContainerContainer
    containers:
      cluster-payload: !type:Container
  - type: CartridgeAmmo
    deleteOnSpawn: true
    proto: AU14AirBurstProjectileFragRMC

- type: entity
  parent: RMC40MMGrenadeM74AGMF
  id: AU1420MMGrenadeL103A1I
  name: L103A1/I 20mm incendiary grenade
  description: A 20mm grenade that explodes into flaming shrapnel & a pool of incendiary compound upon impact.
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_incend
  - type: CartridgeAmmo
    deleteOnSpawn: true
    proto: AU14AirBurstProjectileIncendiaryRMC
  - type: Tag
    tags:
    - Grenade
    - AU14LauncherCompatibleGrenadeRMC
    - AU14AirburstGrenadeRMC
    - AU14GrenadeL103A1I

- type: entity
  parent: AU1420MMGrenadeL104A1
  id: AU14HornetShellL104A1H
  name: L104A1/H 20mm holo-targetting grenade
  description: A 20mm grenade that explodes into shrapnel upon impact. The shrapenl of this one douses the target in a chemical compound which aids in target acquisition by sensors.
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_holo
  - type: CartridgeAmmo
    deleteOnSpawn: true
    proto: AU14AirBurstProjectileHornetRMC

# Projectiles

- type: entity
  abstract: true
  parent: RMCBaseBullet
  id: AU14BaseAirBurstProjectileRMC
  categories: [ HideSpawnMenu ]
  components:
  - type: TriggerOnFixedDistanceStop
    delay: 0
  - type: SpawnOnTrigger
    proto: CMExplosionEffectGrenade
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_frag_active
  - type: Projectile
    deleteOnCollide: false
    impactEffect: BulletImpactEffect
    maxFixedRange: 7
    damage:
      types:
        Piercing: 70
    soundHit:
      path: /Audio/Effects/gen_hit.ogg
  - type: ClusterLimitHits
    limit: 0
    ignoreFirstHit: true
  - type: CMExplosionEffect
    maxShrapnel: 0
  - type: ContainerContainer
    containers:
      cluster-payload: !type:Container
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.15,-0.45,0.15,0.15"
        mask:
        - ItemMask
        restitution: 1
  - type: IgnorePredictionHide

- type: entity
  parent: AU14BaseAirBurstProjectileRMC
  id: AU14AirBurstProjectileFragRMC
  name: L104A1 20mm grenade
  categories: [ HideSpawnMenu ]
  components:
  - type: ProjectileGrenade
    evenSpread: true
    minVelocity: 0.5
    maxVelocity: 1.5
    fillPrototype: AU14ShrapnelJaggedRMC
    rebounds: true
    capacity: 12
    spreadAngle: 40
  - type: ClusterLimitHits
    limit: 5

- type: entity
  parent: AU14BaseAirBurstProjectileRMC
  id: AU14AirBurstProjectileIncendiaryRMC
  name: L103A1/I 20mm grenade
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_incend_active
  - type: ProjectileGrenade
    evenSpread: true
    minVelocity: 0.5
    maxVelocity: 1.5
    fillPrototype: RMCShrapnelIncendiary
    rebounds: true
    capacity: 5
    spreadAngle: 40
  - type: DirectionalTileFireOnTrigger
    range: 3
    spawn: RMCTileFire

- type: entity
  parent: AU14BaseAirBurstProjectileRMC
  id: AU14AirBurstProjectileHornetRMC
  name: L104A1/H 20mm grenade
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    sprite: _AU14/Weapons/Guns/Ammo/Explosives/RMC/grenade_launcher.rsi
    layers:
    - state: grenade_20mm_holo_active
  - type: ProjectileGrenade
    evenSpread: true
    minVelocity: 0.5
    maxVelocity: 1.5
    rebounds: true
    fillPrototype: RMCHornetRound
    capacity: 12
    spreadAngle: 25

- type: entity
  parent: RMCBaseAirburstRound
  id: AU14ShrapnelJaggedRMC
  name: jagged shrapnel
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    sprite: _RMC14/Objects/Weapons/Guns/Ammunition/Projectiles/shotgun_projectiles.rsi
    layers:
    - state: buckshot
      shader: unshaded
  - type: Projectile
    impactEffect: BulletImpactEffect
    damage:
      types:
        Piercing: 25
    soundHit:
      path: /Audio/Weapons/Guns/Hits/bullet_hit.ogg
  - type: CMArmorPiercing
    amount: 10
  - type: RMCStunOnHit
    stuns:
    - whitelist:
        minMobSize: VerySmallXeno
      maxRange: 10
      stunTime: 0
      slowTime: 0.8
  - type: RMCProjectileAccuracy
    accuracy: 100
    thresholds:
    - range: 7
      falloff: 33

- type: Tag
  id: AU14GrenadeL103A1

- type: Tag
  id: AU14GrenadeL103A1I

- type: Tag
  id: AU14GrenadeL104A1